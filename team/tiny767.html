<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.6.1">
<title>tiny767 - Project Portfolio</title>
<link rel="stylesheet" href="../stylesheets/gh-pages.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css">
<link rel="stylesheet" href="../stylesheets/coderay-asciidoctor.css">
</head>
<body class="article">
<div id="header">
<h1>tiny767 - Project Portfolio</h1>
</div>
<div id="content">
<div class="sect1">
<h2 id="project-infinity-book"><a class="link" href="#project-infinity-book">PROJECT: Infinity Book</a></h2>
<div class="sectionbody">
<hr>
</div>
</div>
<div class="sect1">
<h2 id="overview"><a class="link" href="#overview">Overview</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Infinity Book is a desktop address book application used for HR management recruiting candidates. The user interacts with it using a CLI, and it has a GUI created with JavaFX. It is written in Java, and has about 10 kLoC.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="summary-of-contributions"><a class="link" href="#summary-of-contributions">Summary of contributions</a></h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><strong>Major enhancement</strong>: Implementation of Facebook integration.</p>
<div class="ulist">
<ul>
<li>
<p>Description: Facebook integration allows tech recruiters to integrate their facebook accounts to InfinityBook so that they conveniently use Facebook features on InfinityBook itself.</p>
</li>
<li>
<p>Justification: Infinity Book is an end-to-end application designed for tech recruiters. We understand that many tech recruiters use social network platform to screen their candidates.
With this in mind, we want to improve their productivity by integrating facebook into Infinity itself. Recruiters no longer need to switch between different applications.
Instead, they can mostly rely on InfinityBook alone.</p>
</li>
<li>
<p>Highlights: This enhancement touches multiple components:</p>
<div class="ulist">
<ul>
<li>
<p>Added a new panel to UI component to handle authorisation and to act as a GUI for facebook page.</p>
</li>
<li>
<p>Modified Logic component to accept new commands.</p>
</li>
<li>
<p>Register InfinityBook as an application under Facebook for Developer page to make use of Facebook Graph API</p>
</li>
<li>
<p>Made use of RestFB API as a Facebook Graph client API to communicate with Facebook</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Minor enhancement</strong>: Added a command to change theme.</p>
<div class="ulist">
<ul>
<li>
<p>Description: Previously, InfinityBook has a single dark theme that might not be very appealing to tech recruiters. This feature allows
recruiters to switch between different pre-defined theme.</p>
</li>
<li>
<p>Justification: This feature is much needed to improve the look of the app. Moreover, we can continue working on building better-looking themes to release in future iterations.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Minor enhancement</strong>: Added a 'remark' field to person.</p>
<div class="ulist">
<ul>
<li>
<p>Description: Added a flexible 'remark' field and the command to edit it.</p>
</li>
<li>
<p>Justification: Tech recruiters might have additional information for their contacts and relying on tags alone is not enough.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Code contributed</strong>: [<a href="https://github.com/CS2103JAN2018-W11-B3/main/blob/master/collated/functional/tiny767.md">Functional code</a>]
[<a href="https://github.com/CS2103JAN2018-W11-B3/main/blob/master/collated/test/tiny767.md">Test code</a>] <em>{give links to collated code files}</em></p>
</li>
<li>
<p><strong>Other contributions</strong>:</p>
<div class="ulist">
<ul>
<li>
<p>Project management:</p>
<div class="ulist">
<ul>
<li>
<p>Managed releases <code>v1.4</code> on GitHub</p>
</li>
</ul>
</div>
</li>
<li>
<p>Enhancements to existing features:</p>
<div class="ulist">
<ul>
<li>
<p>Made an enhancement to color of tags. Tags with the same content will have the same color.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Community:</p>
<div class="ulist">
<ul>
<li>
<p>Reported bugs and suggestions for other teams in the class (examples:  <a href="https://github.com/CS2103JAN2018-W13-B1/main/issues/162" class="bare">https://github.com/CS2103JAN2018-W13-B1/main/issues/162</a>,
<a href="https://github.com/CS2103JAN2018-W13-B1/main/issues/147" class="bare">https://github.com/CS2103JAN2018-W13-B1/main/issues/147</a>, <a href="https://github.com/CS2103JAN2018-W13-B1/main/issues/156" class="bare">https://github.com/CS2103JAN2018-W13-B1/main/issues/156</a>, <a href="https://github.com/CS2103JAN2018-W13-B1/main/issues/160" class="bare">https://github.com/CS2103JAN2018-W13-B1/main/issues/160</a>)</p>
</li>
</ul>
</div>
</li>
<li>
<p>Tools:</p>
<div class="ulist">
<ul>
<li>
<p>Integrated a third party library (RestFB) to the project</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p><em>{you can add/remove categories in the list above}</em></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="contributions-to-the-user-guide"><a class="link" href="#contributions-to-the-user-guide">Contributions to the User Guide</a></h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Given below are sections I contributed to the User Guide. They showcase my ability to write documentation targeting end-users.</em></p></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="social-media-fb-linkedin-integration"><a class="link" href="#social-media-fb-linkedin-integration">Social Media (FB, Linkedin) Integration</a></h3>
<div class="sect3">
<h4 id="facebook-login-since-v1-4"><a class="link" href="#facebook-login-since-v1-4">Facebook Login [Since v1.4]</a></h4>
<div class="ulist">
<ul>
<li>
<p><strong>Description:</strong> Connect your Facebook account to InfinityBook</p>
</li>
<li>
<p><strong>Format:</strong> <code>facebooklogin</code></p>
</li>
<li>
<p><strong>Alias:</strong> <code>fblogin</code></p>
</li>
<li>
<p><strong>Example:</strong> <code>facebooklogin</code></p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="ulist">
<ul>
<li>
<p>Any arguments supplied after <code>facebooklogin</code> or <code>fblogin</code> will be ignored<br></p>
</li>
<li>
<p>For example, <code>facebooklogin a b c 1 2 3</code> will be treated the same as <code>facebooklogin</code></p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You will be prompted by a Facebook authorization page (displayed in the right-most panel)</p>
</div>
<div class="paragraph">
<p>You can key in your facebook credentials. InfinityBook is then connected to that facebook account and you can use other
features that Infinity Book offers.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="ulist">
<ul>
<li>
<p>If there is no Internet connection, the right-most panel will display a blank page. You can try login again at a later time.</p>
</li>
<li>
<p>If you are already logged-in, the command will simple re-direct you to your facebook page instead of displaying the login page</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="make-a-post-to-facebook-wall-code-facebookpost-code-since-v1-5rc"><a class="link" href="#make-a-post-to-facebook-wall-code-facebookpost-code-since-v1-5rc">Make a post to facebook wall: <code>facebookpost</code> [Since v1.5rc]</a></h4>
<div class="ulist">
<ul>
<li>
<p><strong>Description:</strong> Posting a message to your facebook wall</p>
</li>
<li>
<p><strong>Format:</strong> <code>facebookpost [MESSAGE]</code><br>
[MESSAGE] is the message that users wants to post</p>
</li>
<li>
<p><strong>Alias:</strong> <code>fbpost [MESSAGE]</code></p>
</li>
<li>
<p><strong>Example:</strong> <code>facebookpost Good morning!</code></p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="ulist">
<ul>
<li>
<p>Note that the current Facebook API does not allow an app to post on your behalf. Thus, we need to add your facebook account
manually to our app in the Facebook Developer platform before you can use this feature.<br></p>
</li>
<li>
<p>We have nevertheless created a test facebook account for you to try out this feature<br></p>
</li>
<li>
<p>username: <a href="mailto:infinitybook6@gmail.com">infinitybook6@gmail.com</a><br></p>
</li>
<li>
<p>password: 1d2c3b4a<br></p>
</li>
<li>
<p>If you have logged in to your personal account and want to switch to this account. Simply re-launch the app.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="ulist">
<ul>
<li>
<p>If you are not yet logged in to facebook (by using the command <code>facebooklogin</code>), you will be re-directed to the login page.<br></p>
</li>
</ul>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
After logging in, you need to make the <code>facebookpost</code> command again to post the message.<br>
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p>You can use the facebook page in the right-most panel to review your post</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Even when you are logged in and you use the correct syntax, your message might not be posted to Facebook if it is
rejected at Facebook&#8217;s end. This might be due to errors such as duplicate post, 'not enough permission' or change in Facebook API.
However, under normal circumstances, you can expect that the message will be posted.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="changing-theme-code-theme-code-since-v1-3"><a class="link" href="#changing-theme-code-theme-code-since-v1-3">Changing theme : <code>theme</code> [Since v1.3]</a></h4>
<div class="ulist">
<ul>
<li>
<p><strong>Description:</strong> Change the theme of InfinityBook<br></p>
</li>
<li>
<p><strong>Format:</strong> <code>theme [THEME_NAME]</code><br>
<code>[THEME_NAME]</code> can be <code>morning</code>, <code>dark</code>, or <code>light</code>.</p>
</li>
<li>
<p><strong>Alias:</strong> <code>t [THEME_NAME]</code></p>
</li>
<li>
<p><strong>Examples:</strong></p>
<div class="ulist">
<ul>
<li>
<p><code>theme light</code><br>
Change the user interface to the 'light' theme</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="ulist">
<ul>
<li>
<p>[THEME_NAME] is case-insensitive.<br></p>
</li>
<li>
<p>For example, <code>theme morning</code> and <code>theme MORNING</code> are treated the same</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="contributions-to-the-developer-guide"><a class="link" href="#contributions-to-the-developer-guide">Contributions to the Developer Guide</a></h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Given below are sections I contributed to the Developer Guide. They showcase my ability to write technical documentation and the technical depth of my contributions to the project.</em></p></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="facebook-integration"><a class="link" href="#facebook-integration">Facebook Integration</a></h3>
<div class="paragraph">
<p>The Facebook features (facebooklogin and facebookpost) are facilitated by Facebook Graph API and RestFB API. The Graph API is low-level HTTP-based API used to get data into and out of the Facebook platform while RestAPI is a high level third-party Graph API client.</p>
</div>
<div class="sect3">
<h4 id="preparation"><a class="link" href="#preparation">Preparation</a></h4>
<div class="paragraph">
<p>Firstly, we need to build a Graddle dependency in the <code>graddle.properties</code> file for RestFB API</p>
</div>
<div class="listingblock">
<div class="content">
<pre>compile group: 'com.restfb', name: 'restfb', version: '2.4.0'</pre>
</div>
</div>
<div class="paragraph">
<p>To use Facebook Graph API, we followed the instruction <a href="https://developers.facebook.com/docs/apps/register/#create-app"><code>here</code></a> to create a Facebook Application on the Facebook for developer site</p>
</div>
<div class="paragraph">
<p>Finishing the steps, we reached this page</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/FacebookAppCreated.png" alt="FacebookAppCreated" width="800">
</div>
<div class="title">Figure 1. Facebook Application page</div>
</div>
</div>
<div class="sect3">
<h4 id="implementation"><a class="link" href="#implementation">Implementation</a></h4>
<div class="sect4">
<h5 id="facebooklogin"><a class="link" href="#facebooklogin">Facebooklogin</a></h5>
<div class="paragraph">
<p>We allow users to log in by loading the authentication URL associated with our Facebook Application to the FacebookPanel (to be explained later) specified by Graph API</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">private</span> <span class="directive">static</span> <span class="directive">final</span> <span class="predefined-type">String</span> FACEBOOK_AUTH_URL =
    <span class="string"><span class="delimiter">&quot;</span><span class="content">https://graph.facebook.com/oauth/authorize?type=user_agent&amp;client_id=</span><span class="delimiter">&quot;</span></span> + FACEBOOK_APP_ID
        + <span class="string"><span class="delimiter">&quot;</span><span class="content">&amp;redirect_uri=</span><span class="delimiter">&quot;</span></span> + FACEBOOK_DOMAIN + <span class="string"><span class="delimiter">&quot;</span><span class="content">&amp;scope</span><span class="delimiter">&quot;</span></span> + FACEBOOK_PERMISSIONS;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Platform.runLater(() -&gt; webEngine.load(FACEBOOK_AUTH_URL));</code></pre>
</div>
</div>
<div class="paragraph">
<p>If login credentials are accepted, facebook will return an access_token in its redirected url. An example of a redirected url</p>
</div>
<div class="listingblock">
<div class="content">
<pre>https://www.facebook.com/?#access_token=EAAC15Ydo408BANN5h1MoSHWhLATnte3EchlxqsXA7x2WASMlZBJzlZC3rZCmlu4Wib3hi1bXR2r2sx2ZCgIJvJCrXaTAnQVN4f0ksFLSvCuezLhG43myLJtxT3Qtn0PpcIXXZBjgYUI4LwGvv837KGC2V4ifctNaBnHqRX6e7qAZDZD&amp;expires_in=5184000</pre>
</div>
</div>
<div class="paragraph">
<p>Using this access_token, we 'capture' this login session by making use of RestFB API. We set up the session in <code>FacebookLoginCommand</code> as followed</p>
</div>
<div class="listingblock">
<div class="content">
<pre>fbClient = new DefaultFacebookClient(accessToken, Version.LATEST);
user = fbClient.fetchObject("me", User.class);</pre>
</div>
</div>
<div class="paragraph">
<p>'fbClient' is the Facebook Graph API client with the supplied token.</p>
</div>
<div class="paragraph">
<p>'user' is the authenticated user object.</p>
</div>
</div>
<div class="sect4">
<h5 id="facebookpost"><a class="link" href="#facebookpost">Facebookpost</a></h5>
<div class="paragraph">
<p>We will check if user is authenticated via the boolean variable isAuthenticated before allowing posting on facebook. If user is not authenticated, he will be redirected to log in</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">if</span> (!FacebookLoginCommand.getAuthenticateState()) {
    FacebookLoginCommand fbLoginCommand = <span class="keyword">new</span> FacebookLoginCommand();
    fbLoginCommand.execute();
} <span class="keyword">else</span> {
    completePost();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>We simply post the message to Facebook using the authenticated fbClient in <code>FacebookLoginCommand</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">DefaultFacebookClient fbClient = FacebookLoginCommand.getFbClient();
fbClient.publish(<span class="string"><span class="delimiter">&quot;</span><span class="content">me/feed</span><span class="delimiter">&quot;</span></span>, FacebookType.class, Parameter.with(<span class="string"><span class="delimiter">&quot;</span><span class="content">message</span><span class="delimiter">&quot;</span></span>, toPost));</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="implementation-details"><a class="link" href="#implementation-details">Implementation details</a></h4>
<div class="paragraph">
<p>'FacebookPanel' extends <code>UiPart&lt;Region&gt;</code> and shares the same region with <code>BrowserPanel</code> or <code>ReportPanel</code>. When <code>facebooklogin</code> is executed,
 <code>MainWindow</code> class will swap out the <code>BrowserPanel</code> or <code>ReportPanel</code> and replace by <code>FacebookPanel</code>.
We achieve this by posting <code>ToggleFacebookPanelEvent</code> (showing in the below sequence diagram).</p>
</div>
<div class="paragraph">
<p>'FacebookPanel' is used mainly as a browser to authorize a user to Facebook. It is also used to display the Facebook page after the user is authorized.</p>
</div>
<div class="paragraph">
<p>For capturing the access_token, we register <code>FacebookPanel</code> as an event handler. If the url (of <code>FacebookPanel</code>) changes to a new one that contains the access_token,
 we raise a <code>BrowserUrlChangedEvent</code>. Also, our <code>FacebookPanel</code> is subscribed to handle <code>BrowserUrlChangedEvent</code> by passing the url (with access_token) back to <code>FacebookLoginCommand</code> to complete the authentication.</p>
</div>
<div class="paragraph">
<p>The below sequence diagram show interactions within Logic component when user executes <code>facebookpost hello</code>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/FbSequenceDiagram.png" alt="FbSequenceDiagram" width="800">
</div>
<div class="title">Figure 2. Sequence diagram detailing Logic component when executing facebookpost</div>
</div>
</div>
<div class="sect3">
<h4 id="design-considerations"><a class="link" href="#design-considerations">Design considerations</a></h4>
<div class="paragraph">
<p><strong>Aspect:</strong> Choice of client API for Facebook Graph API<br>
<strong>Alternative 1 (current choice):</strong> Use <code>RestFB</code><br>
<strong>Pros:</strong> RestFB is simple and easy to use with well-documented API
<strong>Cons:</strong> Features are limited<br>
<strong>Alternative 2:</strong> Facebook4j<br>
<strong>Pros:</strong> Facebook4j provides more extensive features<br>
<strong>Cons:</strong> It is harder to use and we do not really need advanced features for now<br></p>
</div>
<hr>
<div class="paragraph">
<p><strong>Aspect:</strong> Authentication<br>
<strong>Alternative 1 (current choice):</strong> Authenticate using the built-in web browser (in FacebookPanel)<br>
<strong>Pros:</strong> Convenient for user as authentication is done inside the app itself<br>
<strong>Cons:</strong> The built-in Java web-engine might not support certain features of a webpage<br>
<strong>Alternative 2:</strong> Authenticate by opening a full-pledged web browser such as Chrome/ Safari<br>
<strong>Pros:</strong> The Facebook authorization page will be better supported by such a browser<br>
<strong>Cons:</strong> User needs to switch between different applications<br></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="theming-mechanism-since-v1-3"><a class="link" href="#theming-mechanism-since-v1-3">Theming Mechanism [since v1.3]</a></h3>
<div class="paragraph">
<p>The theme mechanism is facilitated by a singleton class <code>UiTheme</code> which will be called inside the <code>MainWindow</code> constructor where it passes its <code>scene</code> into the <code>UiTheme</code> class.
The <code>scene</code> is necessary for changing the CSS at runtime.</p>
</div>
<div class="paragraph">
<p>The class <code>UiTheme</code> requires the scene to be set at <code>MainWindow</code> class so that it can be used to edit themes.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>public class UiTheme {
    ...
    public static void setScene(Scene s) {
        scene = s;
        setDefaultTheme();
    }

    private static void setDefaultTheme() {
        setToMorningTheme();
    }

    public static void setToLightTheme() {
        scene.getStylesheets().setAll(LIGHT_THEME_STYLE);
    }

    public static void setToDarkTheme() {
        scene.getStylesheets().setAll(DARK_THEME_STYLE);
    }

    public static void setToMorningTheme() {
        scene.getStylesheets().setAll(MORNING_THEME_STYLE);
    }
    ...
}</pre>
</div>
</div>
<div class="paragraph">
<p>Example of calling the application to change to light theme:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>UiTheme.getInstance().setToLightTheme();</pre>
</div>
</div>
<div class="sect3">
<h4 id="design-considerations-2"><a class="link" href="#design-considerations-2">Design Considerations</a></h4>
<div class="paragraph">
<p><strong>Aspect:</strong> Ways to change the application theme<br>
<strong>Alternative 1 (current choice):</strong> Use a dedicated singleton class <code>UiTheme</code> to change the theme<br>
<strong>Pros:</strong> Provide a dedicated class that manages all the changing of themes. <code>UiTheme</code> can contain many CSS theme file paths and thus the theme mechanism is more scalable . It is easier for <code>ThemeCommand</code> class to call <code>UiTheme</code> instance and use its methods directly.<br>
<strong>Cons:</strong> Increases coupling<br>
<strong>Alternative 2:</strong> Change the themes in <code>MainWindow</code> class directly<br>
<strong>Pros:</strong> Decreases coupling<br>
<strong>Cons:</strong> Violates the single responsibility principle since <code>MainWindow</code> class also controls the changing of theme. It is harder for <code>ThemeCommand</code> class to access the methods from <code>MainWindow</code> to change theme<br></p>
</div>
<hr>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2018-04-15 15:01:39 UTC
</div>
</div>
</body>
</html>